{"version":3,"file":"useAsideHeaderInnerContextValue.cjs","sources":["../../../../src/components/AsideHeader/useAsideHeaderInnerContextValue.tsx"],"sourcesContent":["import React, {useCallback, useEffect, useMemo, useState} from 'react';\n\nimport {AllPagesPanel, getAllPagesMenuItem} from '../AllPagesPanel';\nimport {MenuItem} from '../types';\n\nimport {AsideHeaderInnerContextType} from './AsideHeaderContext';\nimport {AsideHeaderProps, InnerPanels} from './types';\n\nconst EMPTY_MENU_ITEMS: MenuItem[] = [];\n\nexport const useAsideHeaderInnerContextValue = (\n    props: AsideHeaderProps & {size: number},\n): AsideHeaderInnerContextType => {\n    const {size, onClosePanel, menuItems, panelItems, onMenuItemsChanged} = props;\n    const [innerVisiblePanel, setInnerVisiblePanel] = useState<InnerPanels | undefined>();\n    const ALL_PAGES_MENU_ITEM = React.useMemo(() => {\n        return getAllPagesMenuItem();\n    }, []);\n\n    const allPagesIsAvailable =\n        Boolean(onMenuItemsChanged) && (!menuItems || menuItems?.length > 0);\n\n    useEffect(() => {\n        // If any user panel became visible we need to switch off all inner panels\n        if (panelItems?.some((x) => x.visible)) {\n            setInnerVisiblePanel(undefined);\n        }\n    }, [panelItems]);\n\n    const innerOnClosePanel = useCallback(() => {\n        setInnerVisiblePanel(undefined);\n        onClosePanel?.();\n    }, [onClosePanel]);\n\n    const onItemClick = useCallback(\n        (\n            item: MenuItem,\n            collapsed: boolean,\n            event: React.MouseEvent<HTMLDivElement, MouseEvent>,\n        ) => {\n            if (item.id === ALL_PAGES_MENU_ITEM.id) {\n                onClosePanel?.();\n                setInnerVisiblePanel((prev) =>\n                    prev === InnerPanels.AllPages ? undefined : InnerPanels.AllPages,\n                );\n            } else {\n                innerOnClosePanel();\n            }\n            item.onItemClick?.(item, collapsed, event);\n        },\n        [innerOnClosePanel, ALL_PAGES_MENU_ITEM, onClosePanel],\n    );\n\n    const innerMenuItems = useMemo(\n        () =>\n            allPagesIsAvailable\n                ? [\n                      ...(menuItems || EMPTY_MENU_ITEMS),\n                      {\n                          ...ALL_PAGES_MENU_ITEM,\n                          current: innerVisiblePanel === InnerPanels.AllPages,\n                      },\n                  ]\n                : menuItems || EMPTY_MENU_ITEMS,\n        [allPagesIsAvailable, menuItems, innerVisiblePanel, ALL_PAGES_MENU_ITEM],\n    );\n\n    const innerPanelItems = useMemo(() => {\n        if (!allPagesIsAvailable) {\n            return panelItems;\n        }\n        return [\n            ...(panelItems || []),\n            {\n                id: InnerPanels.AllPages,\n                content: <AllPagesPanel />,\n                visible: innerVisiblePanel === InnerPanels.AllPages,\n            },\n        ];\n    }, [allPagesIsAvailable, panelItems, innerVisiblePanel]);\n\n    return {\n        ...props,\n        onClosePanel: innerOnClosePanel,\n        allPagesIsAvailable,\n        menuItems: innerMenuItems,\n        panelItems: innerPanelItems,\n        size,\n        onItemClick,\n    };\n};\n"],"names":["useState","getAllPagesMenuItem","useEffect","useCallback","InnerPanels","useMemo","AllPagesPanel"],"mappings":"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"}