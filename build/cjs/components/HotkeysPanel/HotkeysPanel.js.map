{"version":3,"file":"HotkeysPanel.js","sources":["../../../../../src/components/HotkeysPanel/HotkeysPanel.tsx"],"sourcesContent":["import React, {useCallback, useMemo, useState} from 'react';\nimport type {ReactNode} from 'react';\n\nimport {Hotkey, List, TextInput} from '@gravity-ui/uikit';\nimport type {ListProps} from '@gravity-ui/uikit';\n\nimport {Drawer, DrawerItem} from '../Drawer/Drawer';\nimport type {DrawerProps} from '../Drawer/Drawer';\nimport {block} from '../utils/cn';\n\nimport type {HotkeysGroup, HotkeysListItem} from './types';\nimport {filterHotkeys} from './utils/filterHotkeys';\nimport {flattenHotkeyGroups} from './utils/flattenHotkeyGroups';\n\nimport './HotkeysPanel.scss';\n\nconst b = block('hotkeys-panel');\n\nexport type HotkeysPanelProps<T> = {\n    hotkeys: HotkeysGroup<T>[];\n    title?: ReactNode;\n    filterPlaceholder?: string;\n    emptyState?: ReactNode;\n    visible: boolean;\n    onClose?: () => void;\n    className?: string;\n    leftOffset?: number | string;\n    topOffset?: number | string;\n    preventScrollBody?: DrawerProps['preventScrollBody'];\n} & Omit<ListProps<HotkeysListItem>, 'items' | 'emptyPlaceholder'>;\n\nexport function HotkeysPanel<T = {}>({\n    visible,\n    onClose,\n    leftOffset,\n    topOffset,\n    className,\n    preventScrollBody,\n    hotkeys,\n    itemClassName,\n    filterPlaceholder,\n    title,\n    emptyState,\n    ...listProps\n}: HotkeysPanelProps<T>) {\n    const [filter, setFilter] = useState('');\n\n    const hotkeysList = useMemo(() => {\n        const filteredHotkeys = filterHotkeys(hotkeys, filter);\n        return flattenHotkeyGroups(filteredHotkeys);\n    }, [hotkeys, filter]);\n\n    const renderItem = useCallback(\n        (item: HotkeysListItem) => (\n            <div className={b('item-content', {group: item.group})} key={item.title}>\n                {item.title}\n                {item.value && <Hotkey className={b('hotkey')} value={item.value} />}\n            </div>\n        ),\n        [],\n    );\n\n    const drawerItemContent = (\n        <React.Fragment>\n            <h2 className={b('title')}>{title}</h2>\n            <TextInput\n                value={filter}\n                onUpdate={setFilter}\n                placeholder={filterPlaceholder}\n                autoFocus\n                className={b('search')}\n                hasClear\n            />\n            <List<HotkeysListItem>\n                className={b('list')}\n                virtualized={false}\n                filterable={false}\n                items={hotkeysList}\n                renderItem={renderItem}\n                itemClassName={b('item', itemClassName)}\n                emptyPlaceholder={emptyState as string}\n                {...listProps}\n            />\n        </React.Fragment>\n    );\n\n    return (\n        <Drawer\n            className={b(null, className)}\n            onVeilClick={onClose}\n            onEscape={onClose}\n            preventScrollBody={preventScrollBody}\n            style={{\n                left: leftOffset,\n                top: topOffset,\n            }}\n        >\n            <DrawerItem\n                id=\"hotkeys\"\n                visible={visible}\n                className={b('drawer-item')}\n                content={drawerItemContent}\n            />\n        </Drawer>\n    );\n}\n"],"names":["block","__rest","useState","useMemo","filterHotkeys","flattenHotkeyGroups","useCallback","React","Hotkey","TextInput","List","Drawer","DrawerItem"],"mappings":"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"}