{"version":3,"file":"Item.js","sources":["../../../../../../../src/components/CompositeBar/Item/Item.tsx"],"sourcesContent":["import React from 'react';\n\nimport {ActionTooltip, Icon, List, Popup, PopupPlacement, PopupProps} from '@gravity-ui/uikit';\n\nimport {useAsideHeaderContext} from '../../AsideHeader/AsideHeaderContext';\nimport {ASIDE_HEADER_ICON_SIZE} from '../../constants';\nimport {MakeItemParams, MenuItem} from '../../types';\nimport {block} from '../../utils/cn';\nimport {HighlightedItem} from '../HighlightedItem/HighlightedItem';\nimport {\n    COLLAPSE_ITEM_ID,\n    ITEM_TYPE_REGULAR,\n    POPUP_ITEM_HEIGHT,\n    POPUP_PLACEMENT,\n} from '../constants';\nimport {getSelectedItemIndex} from '../utils';\n\nimport './Item.scss';\n\nconst b = block('composite-bar-item');\n\ninterface ItemPopup {\n    popupVisible?: PopupProps['open'];\n    popupAnchor?: PopupProps['anchorRef'];\n    popupPlacement?: PopupProps['placement'];\n    popupOffset?: PopupProps['offset'];\n    popupKeepMounted?: PopupProps['keepMounted'];\n    popupContentClassName?: PopupProps['contentClassName'];\n    renderPopupContent?: () => React.ReactNode;\n    onClosePopup?: () => void;\n}\n\nexport interface ItemProps extends ItemPopup {\n    item: MenuItem;\n    enableTooltip?: boolean;\n    onItemClick?: (\n        item: MenuItem,\n        collapsed: boolean,\n        event: React.MouseEvent<HTMLDivElement, MouseEvent>,\n    ) => void;\n    onItemClickCapture?: (event: React.SyntheticEvent) => void;\n    bringForward?: boolean;\n}\n\ninterface ItemInnerProps extends ItemProps {\n    className?: string;\n    collapseItems?: MenuItem[];\n    onMouseEnter?: () => void;\n    onMouseLeave?: () => void;\n}\n\nfunction renderItemTitle(item: MenuItem) {\n    let titleNode = <div className={b('title-text')}>{item.title}</div>;\n\n    if (item.rightAdornment) {\n        titleNode = (\n            <React.Fragment>\n                {titleNode}\n                <div className={b('title-adornment')}>{item.rightAdornment}</div>\n            </React.Fragment>\n        );\n    }\n\n    return titleNode;\n}\n\nexport const defaultPopupPlacement: PopupPlacement = ['right-end'];\nexport const defaultPopupOffset: NonNullable<PopupProps['offset']> = [-20, 8];\n\nexport const Item: React.FC<ItemInnerProps> = (props) => {\n    const {\n        item,\n        className,\n        collapseItems,\n        onMouseLeave,\n        onMouseEnter,\n        enableTooltip = true,\n        popupVisible = false,\n        popupAnchor,\n        popupPlacement = defaultPopupPlacement,\n        popupOffset = defaultPopupOffset,\n        popupKeepMounted,\n        popupContentClassName,\n        renderPopupContent,\n        onClosePopup,\n        onItemClick,\n        onItemClickCapture,\n        bringForward,\n    } = props;\n\n    const {compact} = useAsideHeaderContext();\n\n    const [open, toggleOpen] = React.useState<boolean>(false);\n\n    const ref = React.useRef<HTMLDivElement>(null);\n    const anchorRef = popupAnchor || ref;\n    const highlightedRef = React.useRef<HTMLDivElement>(null);\n\n    const type = item.type || ITEM_TYPE_REGULAR;\n    const current = item.current || false;\n    const tooltipText = item.tooltipText || item.title;\n    const icon = item.icon;\n    const iconSize = item.iconSize || ASIDE_HEADER_ICON_SIZE;\n    const iconQa = item.iconQa;\n    const collapsedItem = item.id === COLLAPSE_ITEM_ID;\n\n    const modifiers: Required<PopupProps>['modifiers'] = React.useMemo(\n        () => [\n            {\n                name: 'compact',\n                enabled: true,\n                options: {compact},\n                phase: 'main',\n                fn() {},\n            },\n        ],\n        [compact],\n    );\n\n    const onClose = React.useCallback(\n        (event: MouseEvent | KeyboardEvent) => {\n            if (\n                event instanceof MouseEvent &&\n                event.target &&\n                ref.current?.contains(event.target as Node)\n            ) {\n                return;\n            }\n            onClosePopup?.();\n        },\n        [onClosePopup],\n    );\n\n    if (item.type === 'divider') {\n        return <div className={b('menu-divider')} />;\n    }\n\n    const makeIconNode = (iconEl: React.ReactNode): React.ReactNode => {\n        return compact ? (\n            <ActionTooltip\n                title=\"\"\n                description={tooltipText}\n                disabled={!enableTooltip || (collapsedItem && open) || popupVisible}\n                placement=\"right\"\n                className={b('icon-tooltip', {'item-type': type})}\n            >\n                <div\n                    onMouseEnter={() => onMouseEnter?.()}\n                    onMouseLeave={() => onMouseLeave?.()}\n                    className={b('btn-icon')}\n                >\n                    {iconEl}\n                </div>\n            </ActionTooltip>\n        ) : (\n            iconEl\n        );\n    };\n\n    const makeNode = ({icon: iconEl, title: titleEl}: MakeItemParams) => {\n        const createdNode = (\n            <React.Fragment>\n                <div\n                    className={b({type, current, compact}, className)}\n                    ref={ref}\n                    data-qa={item.qa}\n                    onClick={(event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n                        if (collapsedItem) {\n                            /**\n                             * If we call onItemClick for collapsedItem then:\n                             * - User get unexpected item in onItemClick callback\n                             * - onClosePanel calls twice for each popuped item, as result it will prevent opening of panelItems\n                             */\n                            toggleOpen(!open);\n                        } else {\n                            onItemClick?.(item, false, event);\n                        }\n                    }}\n                    onClickCapture={onItemClickCapture}\n                    onMouseEnter={() => {\n                        if (!compact) {\n                            onMouseEnter?.();\n                        }\n                    }}\n                    onMouseLeave={() => {\n                        if (!compact) {\n                            onMouseLeave?.();\n                        }\n                    }}\n                >\n                    <div className={b('icon-place')} ref={highlightedRef}>\n                        {makeIconNode(iconEl)}\n                    </div>\n\n                    <div\n                        className={b('title')}\n                        title={typeof item.title === 'string' ? item.title : undefined}\n                    >\n                        {titleEl}\n                    </div>\n                </div>\n                {renderPopupContent && Boolean(anchorRef?.current) && (\n                    <Popup\n                        contentClassName={b('popup', popupContentClassName)}\n                        open={popupVisible}\n                        keepMounted={popupKeepMounted}\n                        placement={popupPlacement}\n                        offset={popupOffset}\n                        anchorRef={anchorRef}\n                        onClose={onClose}\n                        modifiers={modifiers}\n                    >\n                        {renderPopupContent()}\n                    </Popup>\n                )}\n            </React.Fragment>\n        );\n\n        return item.link ? (\n            <a href={item.link} className={b('link')}>\n                {createdNode}\n            </a>\n        ) : (\n            createdNode\n        );\n    };\n\n    const iconNode = icon ? (\n        <Icon qa={iconQa} data={icon} size={iconSize} className={b('icon')} />\n    ) : null;\n    const titleNode = renderItemTitle(item);\n    const params = {icon: iconNode, title: titleNode};\n    let highlightedNode = null;\n    let node;\n\n    const opts = {compact: Boolean(compact), collapsed: false, item, ref};\n\n    if (typeof item.itemWrapper === 'function') {\n        node = item.itemWrapper(params, makeNode, opts) as React.ReactElement;\n        highlightedNode =\n            bringForward &&\n            (item.itemWrapper(\n                params,\n                ({icon: iconEl}) => makeIconNode(iconEl),\n                opts,\n            ) as React.ReactElement);\n    } else {\n        node = makeNode(params);\n        highlightedNode = bringForward && makeIconNode(iconNode);\n    }\n\n    return (\n        <React.Fragment>\n            {bringForward && (\n                <HighlightedItem\n                    iconNode={highlightedNode}\n                    iconRef={highlightedRef}\n                    onClick={(event: React.MouseEvent<HTMLDivElement, MouseEvent>) =>\n                        onItemClick?.(item, false, event)\n                    }\n                    onClickCapture={onItemClickCapture}\n                />\n            )}\n            {node}\n            {open && collapsedItem && collapseItems?.length && Boolean(anchorRef?.current) && (\n                <CollapsedPopup {...props} anchorRef={ref} onClose={() => toggleOpen(false)} />\n            )}\n        </React.Fragment>\n    );\n};\n\nItem.displayName = 'Item';\n\ninterface CollapsedPopupProps {\n    anchorRef: React.RefObject<HTMLElement>;\n    onClose: () => void;\n}\n\nfunction CollapsedPopup({\n    onItemClick,\n    collapseItems,\n    anchorRef,\n    onClose,\n}: ItemInnerProps & CollapsedPopupProps) {\n    const {compact} = useAsideHeaderContext();\n    return collapseItems?.length ? (\n        <Popup placement={POPUP_PLACEMENT} open={true} anchorRef={anchorRef} onClose={onClose}>\n            <div className={b('collapse-items-popup-content')}>\n                <List\n                    itemClassName={b('root-collapse-item')}\n                    items={collapseItems}\n                    selectedItemIndex={getSelectedItemIndex(collapseItems)}\n                    itemHeight={POPUP_ITEM_HEIGHT}\n                    itemsHeight={collapseItems.length * POPUP_ITEM_HEIGHT}\n                    virtualized={false}\n                    filterable={false}\n                    sortable={false}\n                    onItemClick={onClose}\n                    renderItem={(collapseItem) => {\n                        const makeCollapseNode = ({\n                            title: titleEl,\n                            icon: iconEl,\n                        }: MakeItemParams) => {\n                            const res = (\n                                <div\n                                    className={b('collapse-item')}\n                                    onClick={(\n                                        event: React.MouseEvent<HTMLDivElement, MouseEvent>,\n                                    ) => {\n                                        onItemClick?.(collapseItem, true, event);\n                                    }}\n                                >\n                                    {iconEl}\n                                    {titleEl}\n                                </div>\n                            );\n\n                            return collapseItem.link ? (\n                                <a href={collapseItem.link} className={b('link')}>\n                                    {res}\n                                </a>\n                            ) : (\n                                res\n                            );\n                        };\n\n                        const titleNode = renderItemTitle(collapseItem);\n                        const iconNode = collapseItem.icon && (\n                            <Icon\n                                data={collapseItem.icon}\n                                size={14}\n                                className={b('collapse-item-icon')}\n                            />\n                        );\n\n                        const params = {title: titleNode, icon: iconNode};\n                        const opts = {\n                            compact: Boolean(compact),\n                            collapsed: true,\n                            item: collapseItem,\n                            ref: anchorRef,\n                        };\n                        if (typeof collapseItem.itemWrapper === 'function') {\n                            return collapseItem.itemWrapper(params, makeCollapseNode, opts);\n                        } else {\n                            return makeCollapseNode(params);\n                        }\n                    }}\n                />\n            </div>\n        </Popup>\n    ) : null;\n}\n"],"names":["block","React","useAsideHeaderContext","ITEM_TYPE_REGULAR","ASIDE_HEADER_ICON_SIZE","COLLAPSE_ITEM_ID","ActionTooltip","Popup","Icon","HighlightedItem","POPUP_PLACEMENT","List","getSelectedItemIndex","POPUP_ITEM_HEIGHT"],"mappings":";;;;;;;;;;;;;;;;;AAmBA,MAAM,CAAC,GAAGA,QAAK,CAAC,oBAAoB,CAAC,CAAC;AAgCtC,SAAS,eAAe,CAAC,IAAc,EAAA;AACnC,IAAA,IAAI,SAAS,GAAGC,yBAAK,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,SAAS,EAAE,CAAC,CAAC,YAAY,CAAC,EAAG,EAAA,IAAI,CAAC,KAAK,CAAO,CAAC;IAEpE,IAAI,IAAI,CAAC,cAAc,EAAE;AACrB,QAAA,SAAS,IACLA,yBAAC,CAAA,aAAA,CAAAA,yBAAK,CAAC,QAAQ,EAAA,IAAA;YACV,SAAS;AACV,YAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAG,EAAA,IAAI,CAAC,cAAc,CAAO,CACpD,CACpB,CAAC;AACL,KAAA;AAED,IAAA,OAAO,SAAS,CAAC;AACrB,CAAC;AAEY,MAAA,qBAAqB,GAAmB,CAAC,WAAW,EAAE;AACtD,MAAA,kBAAkB,GAAsC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE;AAEjE,MAAA,IAAI,GAA6B,CAAC,KAAK,KAAI;IACpD,MAAM,EACF,IAAI,EACJ,SAAS,EACT,aAAa,EACb,YAAY,EACZ,YAAY,EACZ,aAAa,GAAG,IAAI,EACpB,YAAY,GAAG,KAAK,EACpB,WAAW,EACX,cAAc,GAAG,qBAAqB,EACtC,WAAW,GAAG,kBAAkB,EAChC,gBAAgB,EAChB,qBAAqB,EACrB,kBAAkB,EAClB,YAAY,EACZ,WAAW,EACX,kBAAkB,EAClB,YAAY,GACf,GAAG,KAAK,CAAC;AAEV,IAAA,MAAM,EAAC,OAAO,EAAC,GAAGC,wCAAqB,EAAE,CAAC;AAE1C,IAAA,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,GAAGD,yBAAK,CAAC,QAAQ,CAAU,KAAK,CAAC,CAAC;IAE1D,MAAM,GAAG,GAAGA,yBAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;AAC/C,IAAA,MAAM,SAAS,GAAG,WAAW,IAAI,GAAG,CAAC;IACrC,MAAM,cAAc,GAAGA,yBAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;AAE1D,IAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,IAAIE,2BAAiB,CAAC;AAC5C,IAAA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,KAAK,CAAC;IACtC,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC;AACnD,IAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACvB,IAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAIC,kCAAsB,CAAC;AACzD,IAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAC3B,IAAA,MAAM,aAAa,GAAG,IAAI,CAAC,EAAE,KAAKC,0BAAgB,CAAC;IAEnD,MAAM,SAAS,GAAsCJ,yBAAK,CAAC,OAAO,CAC9D,MAAM;AACF,QAAA;AACI,YAAA,IAAI,EAAE,SAAS;AACf,YAAA,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,EAAC,OAAO,EAAC;AAClB,YAAA,KAAK,EAAE,MAAM;AACb,YAAA,EAAE,MAAK;AACV,SAAA;AACJ,KAAA,EACD,CAAC,OAAO,CAAC,CACZ,CAAC;IAEF,MAAM,OAAO,GAAGA,yBAAK,CAAC,WAAW,CAC7B,CAAC,KAAiC,KAAI;;QAClC,IACI,KAAK,YAAY,UAAU;AAC3B,YAAA,KAAK,CAAC,MAAM;aACZ,CAAA,EAAA,GAAA,GAAG,CAAC,OAAO,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,QAAQ,CAAC,KAAK,CAAC,MAAc,CAAC,CAAA,EAC7C;YACE,OAAO;AACV,SAAA;AACD,QAAA,YAAY,KAAZ,IAAA,IAAA,YAAY,KAAZ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,YAAY,EAAI,CAAC;AACrB,KAAC,EACD,CAAC,YAAY,CAAC,CACjB,CAAC;AAEF,IAAA,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;QACzB,OAAOA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,CAAC,CAAC,cAAc,CAAC,GAAI,CAAC;AAChD,KAAA;AAED,IAAA,MAAM,YAAY,GAAG,CAAC,MAAuB,KAAqB;QAC9D,OAAO,OAAO,IACVA,yBAAC,CAAA,aAAA,CAAAK,mBAAa,IACV,KAAK,EAAC,EAAE,EACR,WAAW,EAAE,WAAW,EACxB,QAAQ,EAAE,CAAC,aAAa,KAAK,aAAa,IAAI,IAAI,CAAC,IAAI,YAAY,EACnE,SAAS,EAAC,OAAO,EACjB,SAAS,EAAE,CAAC,CAAC,cAAc,EAAE,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC,EAAA;AAEjD,YAAAL,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EACI,YAAY,EAAE,MAAM,YAAY,aAAZ,YAAY,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAZ,YAAY,EAAI,EACpC,YAAY,EAAE,MAAM,YAAY,KAAZ,IAAA,IAAA,YAAY,KAAZ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,YAAY,EAAI,EACpC,SAAS,EAAE,CAAC,CAAC,UAAU,CAAC,EAAA,EAEvB,MAAM,CACL,CACM,KAEhB,MAAM,CACT,CAAC;AACN,KAAC,CAAC;AAEF,IAAA,MAAM,QAAQ,GAAG,CAAC,EAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAiB,KAAI;AAChE,QAAA,MAAM,WAAW,IACbA,yBAAC,CAAA,aAAA,CAAAA,yBAAK,CAAC,QAAQ,EAAA,IAAA;AACX,YAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EACI,SAAS,EAAE,CAAC,CAAC,EAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAC,EAAE,SAAS,CAAC,EACjD,GAAG,EAAE,GAAG,EACC,SAAA,EAAA,IAAI,CAAC,EAAE,EAChB,OAAO,EAAE,CAAC,KAAmD,KAAI;AAC7D,oBAAA,IAAI,aAAa,EAAE;AACf;;;;AAIG;AACH,wBAAA,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC;AACrB,qBAAA;AAAM,yBAAA;wBACH,WAAW,KAAA,IAAA,IAAX,WAAW,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAX,WAAW,CAAG,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;AACrC,qBAAA;iBACJ,EACD,cAAc,EAAE,kBAAkB,EAClC,YAAY,EAAE,MAAK;oBACf,IAAI,CAAC,OAAO,EAAE;AACV,wBAAA,YAAY,KAAZ,IAAA,IAAA,YAAY,KAAZ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,YAAY,EAAI,CAAC;AACpB,qBAAA;AACL,iBAAC,EACD,YAAY,EAAE,MAAK;oBACf,IAAI,CAAC,OAAO,EAAE;AACV,wBAAA,YAAY,KAAZ,IAAA,IAAA,YAAY,KAAZ,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,YAAY,EAAI,CAAC;AACpB,qBAAA;iBACJ,EAAA;AAED,gBAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,CAAC,CAAC,YAAY,CAAC,EAAE,GAAG,EAAE,cAAc,EAC/C,EAAA,YAAY,CAAC,MAAM,CAAC,CACnB;AAEN,gBAAAA,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EACI,SAAS,EAAE,CAAC,CAAC,OAAO,CAAC,EACrB,KAAK,EAAE,OAAO,IAAI,CAAC,KAAK,KAAK,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,SAAS,EAAA,EAE7D,OAAO,CACN,CACJ;YACL,kBAAkB,IAAI,OAAO,CAAC,SAAS,KAAA,IAAA,IAAT,SAAS,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAT,SAAS,CAAE,OAAO,CAAC,KAC9CA,yBAAC,CAAA,aAAA,CAAAM,WAAK,EACF,EAAA,gBAAgB,EAAE,CAAC,CAAC,OAAO,EAAE,qBAAqB,CAAC,EACnD,IAAI,EAAE,YAAY,EAClB,WAAW,EAAE,gBAAgB,EAC7B,SAAS,EAAE,cAAc,EACzB,MAAM,EAAE,WAAW,EACnB,SAAS,EAAE,SAAS,EACpB,OAAO,EAAE,OAAO,EAChB,SAAS,EAAE,SAAS,EAAA,EAEnB,kBAAkB,EAAE,CACjB,CACX,CACY,CACpB,CAAC;AAEF,QAAA,OAAO,IAAI,CAAC,IAAI,IACZN,yBAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAG,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,EAAA,EACnC,WAAW,CACZ,KAEJ,WAAW,CACd,CAAC;AACN,KAAC,CAAC;AAEF,IAAA,MAAM,QAAQ,GAAG,IAAI,IACjBA,yBAAC,CAAA,aAAA,CAAAO,UAAI,IAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,GAAI,IACtE,IAAI,CAAC;AACT,IAAA,MAAM,SAAS,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC;IACxC,MAAM,MAAM,GAAG,EAAC,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAC,CAAC;IAClD,IAAI,eAAe,GAAG,IAAI,CAAC;AAC3B,IAAA,IAAI,IAAI,CAAC;AAET,IAAA,MAAM,IAAI,GAAG,EAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAC,CAAC;AAEtE,IAAA,IAAI,OAAO,IAAI,CAAC,WAAW,KAAK,UAAU,EAAE;QACxC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAuB,CAAC;QACtE,eAAe;YACX,YAAY;gBACX,IAAI,CAAC,WAAW,CACb,MAAM,EACN,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,KAAK,YAAY,CAAC,MAAM,CAAC,EACxC,IAAI,CACgB,CAAC;AAChC,KAAA;AAAM,SAAA;AACH,QAAA,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;AACxB,QAAA,eAAe,GAAG,YAAY,IAAI,YAAY,CAAC,QAAQ,CAAC,CAAC;AAC5D,KAAA;AAED,IAAA,QACIP,yBAAA,CAAA,aAAA,CAACA,yBAAK,CAAC,QAAQ,EAAA,IAAA;AACV,QAAA,YAAY,KACTA,yBAAA,CAAA,aAAA,CAACQ,+BAAe,EAAA,EACZ,QAAQ,EAAE,eAAe,EACzB,OAAO,EAAE,cAAc,EACvB,OAAO,EAAE,CAAC,KAAmD,KACzD,WAAW,KAAX,IAAA,IAAA,WAAW,KAAX,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,WAAW,CAAG,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAErC,cAAc,EAAE,kBAAkB,GACpC,CACL;QACA,IAAI;QACJ,IAAI,IAAI,aAAa,KAAI,aAAa,aAAb,aAAa,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAb,aAAa,CAAE,MAAM,CAAA,IAAI,OAAO,CAAC,SAAS,KAAA,IAAA,IAAT,SAAS,KAAT,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,SAAS,CAAE,OAAO,CAAC,KAC1ER,yBAAC,CAAA,aAAA,CAAA,cAAc,oBAAK,KAAK,EAAA,EAAE,SAAS,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,UAAU,CAAC,KAAK,CAAC,EAAI,CAAA,CAAA,CAClF,CACY,EACnB;AACN,EAAE;AAEF,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;AAO1B,SAAS,cAAc,CAAC,EACpB,WAAW,EACX,aAAa,EACb,SAAS,EACT,OAAO,GAC4B,EAAA;AACnC,IAAA,MAAM,EAAC,OAAO,EAAC,GAAGC,wCAAqB,EAAE,CAAC;AAC1C,IAAA,OAAO,CAAA,aAAa,KAAb,IAAA,IAAA,aAAa,KAAb,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,aAAa,CAAE,MAAM,KACxBD,yBAAC,CAAA,aAAA,CAAAM,WAAK,EAAC,EAAA,SAAS,EAAEG,yBAAe,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAA;AACjF,QAAAT,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAK,SAAS,EAAE,CAAC,CAAC,8BAA8B,CAAC,EAAA;YAC7CA,yBAAC,CAAA,aAAA,CAAAU,UAAI,EACD,EAAA,aAAa,EAAE,CAAC,CAAC,oBAAoB,CAAC,EACtC,KAAK,EAAE,aAAa,EACpB,iBAAiB,EAAEC,0BAAoB,CAAC,aAAa,CAAC,EACtD,UAAU,EAAEC,2BAAiB,EAC7B,WAAW,EAAE,aAAa,CAAC,MAAM,GAAGA,2BAAiB,EACrD,WAAW,EAAE,KAAK,EAClB,UAAU,EAAE,KAAK,EACjB,QAAQ,EAAE,KAAK,EACf,WAAW,EAAE,OAAO,EACpB,UAAU,EAAE,CAAC,YAAY,KAAI;AACzB,oBAAA,MAAM,gBAAgB,GAAG,CAAC,EACtB,KAAK,EAAE,OAAO,EACd,IAAI,EAAE,MAAM,GACC,KAAI;AACjB,wBAAA,MAAM,GAAG,IACLZ,yBACI,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,SAAS,EAAE,CAAC,CAAC,eAAe,CAAC,EAC7B,OAAO,EAAE,CACL,KAAmD,KACnD;gCACA,WAAW,KAAA,IAAA,IAAX,WAAW,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAX,WAAW,CAAG,YAAY,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;6BAC5C,EAAA;4BAEA,MAAM;4BACN,OAAO,CACN,CACT,CAAC;AAEF,wBAAA,OAAO,YAAY,CAAC,IAAI,IACpBA,yBAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAG,IAAI,EAAE,YAAY,CAAC,IAAI,EAAE,SAAS,EAAE,CAAC,CAAC,MAAM,CAAC,EAAA,EAC3C,GAAG,CACJ,KAEJ,GAAG,CACN,CAAC;AACN,qBAAC,CAAC;AAEF,oBAAA,MAAM,SAAS,GAAG,eAAe,CAAC,YAAY,CAAC,CAAC;AAChD,oBAAA,MAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,KAC9BA,yBAAA,CAAA,aAAA,CAACO,UAAI,EAAA,EACD,IAAI,EAAE,YAAY,CAAC,IAAI,EACvB,IAAI,EAAE,EAAE,EACR,SAAS,EAAE,CAAC,CAAC,oBAAoB,CAAC,EACpC,CAAA,CACL,CAAC;oBAEF,MAAM,MAAM,GAAG,EAAC,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAC,CAAC;AAClD,oBAAA,MAAM,IAAI,GAAG;AACT,wBAAA,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC;AACzB,wBAAA,SAAS,EAAE,IAAI;AACf,wBAAA,IAAI,EAAE,YAAY;AAClB,wBAAA,GAAG,EAAE,SAAS;qBACjB,CAAC;AACF,oBAAA,IAAI,OAAO,YAAY,CAAC,WAAW,KAAK,UAAU,EAAE;wBAChD,OAAO,YAAY,CAAC,WAAW,CAAC,MAAM,EAAE,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACnE,qBAAA;AAAM,yBAAA;AACH,wBAAA,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAC;AACnC,qBAAA;iBACJ,EAAA,CACH,CACA,CACF,IACR,IAAI,CAAC;AACb;;;;;;"}