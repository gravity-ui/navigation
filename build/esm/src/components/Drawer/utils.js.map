{"version":3,"file":"utils.js","sources":["../../../../../../src/components/Drawer/utils.ts"],"sourcesContent":["import * as React from 'react';\n\nexport const DRAWER_ITEM_MIN_RESIZE_WIDTH = 200;\nexport const DRAWER_ITEM_MAX_RESIZE_WIDTH = 800;\nexport const DRAWER_ITEM_INITIAL_RESIZE_WIDTH = 400;\n\nexport type DrawerDirection = 'right' | 'left';\nexport type OnResizeHandler = (width: number) => void;\n\nfunction getEventClientX(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n    return 'touches' in e ? e.touches[0]?.clientX ?? 0 : e.clientX;\n}\n\nexport interface UseResizeHandlersParams {\n    onStart: () => void;\n    onMove: (delta: number) => void;\n    onEnd: (delta: number) => void;\n}\n\nexport function useResizeHandlers({onStart, onMove, onEnd}: UseResizeHandlersParams) {\n    const initialXPosition = React.useRef(0);\n    const currentXPosition = React.useRef(0);\n\n    const handleMove = React.useCallback(\n        (e: MouseEvent | TouchEvent) => {\n            const currentX = getEventClientX(e);\n\n            if (currentXPosition.current === currentX) {\n                return;\n            }\n\n            currentXPosition.current = currentX;\n\n            const delta = initialXPosition.current - currentX;\n\n            onMove(delta);\n        },\n        [onMove],\n    );\n\n    const handleEnd = React.useCallback(\n        (e: MouseEvent | TouchEvent) => {\n            window.removeEventListener('mousemove', handleMove);\n            window.removeEventListener('touchmove', handleMove);\n\n            document.body.style.removeProperty('user-select');\n            document.body.style.removeProperty('-webkit-user-select');\n            document.body.style.removeProperty('cursor');\n\n            const currentX = getEventClientX(e);\n            const delta = initialXPosition.current - currentX;\n\n            onEnd(delta);\n        },\n        [handleMove, onEnd],\n    );\n\n    const handleStart = React.useCallback(\n        (e: React.MouseEvent | React.TouchEvent) => {\n            const currentX = getEventClientX(e);\n\n            initialXPosition.current = currentX;\n            currentXPosition.current = currentX;\n\n            window.addEventListener('mouseup', handleEnd, {once: true});\n            window.addEventListener('touchend', handleEnd, {once: true});\n            window.addEventListener('touchcancel', handleEnd, {once: true});\n\n            window.addEventListener('mousemove', handleMove);\n            window.addEventListener('touchmove', handleMove);\n\n            document.body.style.setProperty('user-select', 'none');\n            document.body.style.setProperty('-webkit-user-select', 'none');\n            document.body.style.setProperty('cursor', 'col-resize');\n\n            onStart();\n        },\n        [handleEnd, handleMove, onStart],\n    );\n\n    return {\n        onMouseDown: handleStart,\n        onTouchStart: handleStart,\n    };\n}\n\nexport interface UseResizableDrawerItemParams {\n    direction?: DrawerDirection;\n    width?: number;\n    minResizeWidth?: number;\n    maxResizeWidth?: number;\n    onResize?: OnResizeHandler;\n}\n\nexport function useResizableDrawerItem(params: UseResizableDrawerItemParams) {\n    const {\n        direction,\n        width,\n        minResizeWidth = DRAWER_ITEM_MIN_RESIZE_WIDTH,\n        maxResizeWidth = DRAWER_ITEM_MAX_RESIZE_WIDTH,\n        onResize,\n    } = params;\n\n    const [isResizing, setIsResizing] = React.useState(false);\n    const [resizeDelta, setResizeDelta] = React.useState(0);\n    const [internalWidth, setInternalWidth] = React.useState(\n        width ?? DRAWER_ITEM_INITIAL_RESIZE_WIDTH,\n    );\n\n    const getClampedWidth = React.useCallback(\n        (width: number) => Math.min(Math.max(width, minResizeWidth), maxResizeWidth),\n        [minResizeWidth, maxResizeWidth],\n    );\n\n    const getResizedWidth = React.useCallback(\n        (delta: number) => {\n            const signedDelta = direction === 'right' ? delta : -delta;\n            const newWidth = (width ?? internalWidth) + signedDelta;\n            return getClampedWidth(newWidth);\n        },\n        [width, internalWidth, direction, getClampedWidth],\n    );\n\n    const onStart = React.useCallback(() => {\n        setIsResizing(true);\n        setResizeDelta(0);\n    }, [setIsResizing, setResizeDelta]);\n\n    const onMove = React.useCallback((delta: number) => {\n        setResizeDelta(delta);\n    }, []);\n\n    const onEnd = React.useCallback(\n        (delta: number) => {\n            const newWidth = getResizedWidth(delta);\n            setIsResizing(false);\n            setInternalWidth(newWidth);\n            onResize?.(newWidth);\n        },\n        [setIsResizing, setInternalWidth, getResizedWidth, onResize],\n    );\n\n    const displayWidth = isResizing\n        ? getResizedWidth(resizeDelta)\n        : getClampedWidth(width ?? internalWidth);\n\n    const handlers = useResizeHandlers({onStart, onMove, onEnd});\n\n    return {resizedWidth: displayWidth, resizerHandlers: handlers};\n}\n"],"names":[],"mappings":"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"}